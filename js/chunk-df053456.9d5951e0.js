(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df053456"],{"0226":function(t,i,e){},"0c94":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("svg-icon",{style:t.svgStyle,attrs:{"icon-class":"explicit"}})},s=[],r=(e("a9e3"),e("0032")),n={name:"ExplicitSymbol",components:{SvgIcon:r["a"]},props:{size:{type:Number,default:16}},data:function(){return{svgStyle:{}}},created:function(){this.svgStyle={height:this.size+"px",width:this.size+"px"}}},c=n,l=e("2877"),o=Object(l["a"])(c,a,s,!1,null,"7e2a888e",null);i["a"]=o.exports},"186d":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("span",{staticClass:"artist-in-line"},[t._v(" "+t._s(t.computedPrefix)+" "),t._l(t.filteredArtists,(function(i,a){return e("span",{key:i.id},[e("router-link",{attrs:{to:"/artist/"+i.id}},[t._v(t._s(i.name))]),a!==t.filteredArtists.length-1?e("span",[t._v(", ")]):t._e()],1)}))],2)},s=[],r=(e("4de4"),e("b0c0"),{name:"ArtistInLine",props:{artists:{type:Array,required:!0},exclude:{type:String,default:""},prefix:{type:String,default:""}},computed:{filteredArtists:function(){var t=this;return this.artists.filter((function(i){return i.name!==t.exclude}))},computedPrefix:function(){return 0!==this.filteredArtists.length?this.prefix:""}}}),n=r,c=e("2877"),l=Object(c["a"])(n,a,s,!1,null,"6b13d4cd",null);i["a"]=l.exports},2909:function(t,i,e){"use strict";e.d(i,"a",(function(){return l}));var a=e("6b75");function s(t){if(Array.isArray(t))return Object(a["a"])(t)}e("a4d3"),e("e01a"),e("d3b7"),e("d28b"),e("3ca3"),e("ddb0"),e("a630");function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var n=e("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return s(t)||r(t)||Object(n["a"])(t)||c()}},"33b2":function(t,i,e){},3552:function(t,i,e){"use strict";e("33b2")},"98ec":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"next-tracks"},[e("h1",[t._v(t._s(t.$t("next.nowPlaying")))]),e("TrackList",{attrs:{tracks:[t.currentTrack],type:"playlist",dbclickTrackFunc:"none"}}),e("h1",{directives:[{name:"show",rawName:"v-show",value:t.playNextList.length>0,expression:"playNextList.length > 0"}]},[t._v("插队播放")]),e("TrackList",{directives:[{name:"show",rawName:"v-show",value:t.playNextList.length>0,expression:"playNextList.length > 0"}],attrs:{tracks:t.playNextTracks,type:"playlist",highlightPlayingTrack:!1,dbclickTrackFunc:"playTrackOnListByID",itemKey:"id+index"}}),e("h1",[t._v(t._s(t.$t("next.nextUp")))]),e("TrackList",{attrs:{tracks:t.filteredTracks,type:"playlist",highlightPlayingTrack:!1,dbclickTrackFunc:"playTrackOnListByID"}})],1)},s=[],r=e("2909"),n=e("5530"),c=(e("fb6a"),e("4de4"),e("caad"),e("2532"),e("d81d"),e("7db0"),e("a15b"),e("2f62")),l=e("fefb"),o=e("a1a1"),u={name:"Next",components:{TrackList:o["a"]},data:function(){return{tracks:[]}},computed:Object(n["a"])(Object(n["a"])({},Object(c["d"])(["player"])),{},{currentTrack:function(){return this.player.currentTrack},playerShuffle:function(){return this.player.shuffle},filteredTracks:function(){var t=this.player.list.slice(this.player.current+1,this.player.current+100);return this.tracks.filter((function(i){return t.includes(i.id)}))},playNextList:function(){return this.player.playNextList},playNextTracks:function(){var t=this;return this.playNextList.map((function(i){return t.tracks.find((function(t){return t.id===i}))}))}}),watch:{currentTrack:function(){this.loadTracks()},playerShuffle:function(){this.loadTracks()},playNextList:function(){this.loadTracks()}},methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["playTrackOnListByID"])),{},{loadTracks:function(){var t=this,i=this.player.list.slice(this.player.current+1,this.player.current+100);i.push.apply(i,Object(r["a"])(this.playNextList));var e=this.tracks.map((function(t){return t.id}));i.length>0&&Object(l["c"])(i.join(",")).then((function(i){var a,s=i.songs.filter((function(t){return!e.includes(t.id)}));(a=t.tracks).push.apply(a,Object(r["a"])(s))}))}}),activated:function(){this.loadTracks()}},d=u,h=(e("3552"),e("2877")),k=Object(h["a"])(d,a,s,!1,null,"658b0d37",null);i["default"]=k.exports},a1a1:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"track-list"},[e("ContextMenu",{ref:"menu"},[e("div",{staticClass:"item-info"},[e("img",{attrs:{src:t._f("resizeImage")(t.rightClickedTrack.al.picUrl,224)}}),e("div",{staticClass:"info"},[e("div",{staticClass:"title"},[t._v(t._s(t.rightClickedTrack.name))]),e("div",{staticClass:"subtitle"},[t._v(t._s(t.rightClickedTrack.ar[0].name))])])]),e("hr"),e("div",{staticClass:"item",on:{click:t.play}},[t._v(t._s(t.$t("contextMenu.play")))]),e("div",{staticClass:"item",on:{click:t.playNext}},[t._v(t._s(t.$t("contextMenu.playNext")))]),e("hr"),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isRightClickedTrackLiked,expression:"!isRightClickedTrackLiked"}],staticClass:"item",on:{click:t.like}},[t._v(" "+t._s(t.$t("contextMenu.saveToMyLikedSongs"))+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isRightClickedTrackLiked,expression:"isRightClickedTrackLiked"}],staticClass:"item",on:{click:t.like}},[t._v(" "+t._s(t.$t("contextMenu.removeFromMyLikedSongs"))+" ")]),t.extraContextMenuItem.includes("removeTrackFromPlaylist")?e("div",{staticClass:"item",on:{click:t.removeTrackFromPlaylist}},[t._v("从歌单中删除")]):t._e(),e("div",{staticClass:"item",on:{click:t.addTrackToPlaylist}},[t._v("添加到歌单")])]),e("div",{style:t.listStyles},t._l(t.tracks,(function(i,a){return e("TrackListItem",{key:"id"===t.itemKey?i.id:""+i.id+a,attrs:{track:i,highlightPlayingTrack:t.highlightPlayingTrack},nativeOn:{dblclick:function(e){return t.playThisList(i.id)},contextmenu:function(e){return t.openMenu(e,i)}}})})),1)],1)},s=[],r=e("5530"),n=(e("a9e3"),e("caad"),e("2532"),e("d81d"),e("4de4"),e("b0c0"),e("2f62")),c=e("fefb"),l=e("1e9a"),o=e("5f87"),u=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"track",class:t.trackClass,style:t.trackStyle,attrs:{title:t.showUnavailableSongInGreyStyle?t.track.reason:""},on:{mouseover:function(i){t.hover=!0},mouseleave:function(i){t.hover=!1}}},[t.isAlbum?t._e():e("img",{class:{hover:t.focus},attrs:{src:t.imgUrl},on:{click:t.goToAlbum}}),t.isAlbum?e("div",{staticClass:"no"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.focus&&t.track.playable&&!t.isPlaying,expression:"focus && track.playable && !isPlaying"}],on:{click:t.playTrack}},[e("svg-icon",{staticStyle:{height:"14px",width:"14px"},attrs:{"icon-class":"play"}})],1),e("span",{directives:[{name:"show",rawName:"v-show",value:(!t.focus||!t.track.playable)&&!t.isPlaying,expression:"(!focus || !track.playable) && !isPlaying"}]},[t._v(t._s(t.track.no))]),e("button",{directives:[{name:"show",rawName:"v-show",value:t.isPlaying,expression:"isPlaying"}]},[e("svg-icon",{staticStyle:{height:"16px",width:"16px"},attrs:{"icon-class":"volume"}})],1)]):t._e(),e("div",{staticClass:"title-and-artist"},[e("div",{staticClass:"container"},[e("div",{staticClass:"title"},[t._v(" "+t._s(t.track.name)+" "),t.isAlbum?e("span",{staticClass:"featured"},[e("ArtistsInLine",{attrs:{artists:t.track.ar,exclude:this.$parent.albumObject.artist.name,prefix:"-"}})],1):t._e(),t.isAlbum&&1318912===t.track.mark?e("span",{staticClass:"explicit-symbol"},[e("ExplicitSymbol")],1):t._e()]),t.isAlbum?t._e():e("div",{staticClass:"artist"},[1318912===t.track.mark?e("span",{staticClass:"explicit-symbol before-artist"},[e("ExplicitSymbol",{attrs:{size:15}})],1):t._e(),e("ArtistsInLine",{attrs:{artists:t.artists}})],1)]),e("div")]),t.isTracklist||t.isAlbum?t._e():e("div",{staticClass:"album"},[e("router-link",{attrs:{to:"/album/"+t.album.id}},[t._v(t._s(t.album.name))]),e("div")],1),t.isTracklist?t._e():e("div",{staticClass:"actions"},[e("button",{on:{click:t.likeThisSong}},[e("svg-icon",{style:{visibility:t.focus&&!t.isLiked?"visible":"hidden"},attrs:{"icon-class":"heart"}}),e("svg-icon",{directives:[{name:"show",rawName:"v-show",value:t.isLiked,expression:"isLiked"}],attrs:{"icon-class":"heart-solid"}})],1)]),t.isTracklist?t._e():e("div",{staticClass:"time"},[t._v(" "+t._s(t._f("formatTime")(t.track.dt))+" ")])])},d=[],h=e("186d"),k=e("0c94"),p={name:"TrackListItem",components:{ArtistsInLine:h["a"],ExplicitSymbol:k["a"]},props:{track:Object,highlightPlayingTrack:{type:Boolean,default:!0}},data:function(){return{hover:!1,trackStyle:{}}},computed:Object(r["a"])(Object(r["a"])({},Object(n["d"])(["settings"])),{},{imgUrl:function(){var t,i,e,a,s,r,n=null!==(t=null!==(i=null===(e=this.track)||void 0===e||null===(a=e.al)||void 0===a?void 0:a.picUrl)&&void 0!==i?i:null===(s=this.track)||void 0===s||null===(r=s.album)||void 0===r?void 0:r.picUrl)&&void 0!==t?t:"https://p2.music.126.net/UeTuwE7pvjBpypWLudqukA==/3132508627578625.jpg";return n+"?param=224y224"},artists:function(){return void 0!==this.track.ar?this.track.ar:void 0!==this.track.artists?this.track.artists:[]},album:function(){return this.track.album||this.track.al},type:function(){return this.$parent.type},isAlbum:function(){return"album"===this.type},isTracklist:function(){return"tracklist"===this.type},isPlaylist:function(){return"playlist"===this.type},isLiked:function(){return this.$parent.liked.songs.includes(this.track.id)},isPlaying:function(){return this.$store.state.player.currentTrack.id===this.track.id},trackClass:function(){var t=[this.type];return!this.track.playable&&this.settings.showUnavailableSongInGreyStyle&&t.push("disable"),this.isPlaying&&this.highlightPlayingTrack&&t.push("playing"),this.focus&&t.push("focus"),t},isMenuOpened:function(){return this.$parent.rightClickedTrack.id===this.track.id},focus:function(){return this.hover&&0===this.$parent.rightClickedTrack.id||this.isMenuOpened},showUnavailableSongInGreyStyle:function(){return this.$store.state.settings.showUnavailableSongInGreyStyle}}),methods:{goToAlbum:function(){this.$router.push({path:"/album/"+this.track.al.id})},playTrack:function(){this.$parent.playThisList(this.track.id)},likeThisSong:function(){this.$parent.likeASong(this.track.id)}}},y=p,f=(e("a23f"),e("2877")),m=Object(f["a"])(y,u,d,!1,null,"0fd62688",null),v=m.exports,b=e("6825"),g={name:"TrackList",components:{TrackListItem:v,ContextMenu:b["a"]},props:{tracks:Array,type:String,id:Number,dbclickTrackFunc:{type:String,default:"default"},albumObject:{type:Object,default:function(){return{artist:{name:""}}}},extraContextMenuItem:{type:Array,default:function(){return[]}},columnNumber:{type:Number,default:4},highlightPlayingTrack:{type:Boolean,default:!0},itemKey:{type:String,default:"id"}},data:function(){return{rightClickedTrack:{id:0,name:"",ar:[{name:""}],al:{picUrl:""}},listStyles:{}}},created:function(){"tracklist"===this.type&&(this.listStyles={display:"grid",gap:"4px",gridTemplateColumns:"repeat(".concat(this.columnNumber,", 1fr)")})},computed:Object(r["a"])(Object(r["a"])({},Object(n["d"])(["liked"])),{},{isRightClickedTrackLiked:function(){var t;return this.liked.songs.includes(null===(t=this.rightClickedTrack)||void 0===t?void 0:t.id)}}),methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(n["c"])(["updateLikedSongs","updateModal"])),Object(n["b"])(["nextTrack","showToast"])),{},{openMenu:function(t,i){this.rightClickedTrack=i,this.$refs.menu.openMenu(t)},closeMenu:function(){this.rightClickedTrack={id:0,name:"",ar:[{name:""}],al:{picUrl:""}}},playThisList:function(t){if("default"===this.dbclickTrackFunc)this.playThisListDefault(t);else if("none"===this.dbclickTrackFunc);else if("playTrackOnListByID"===this.dbclickTrackFunc)this.$store.state.player.playTrackOnListByID(t);else if("playPlaylistByID"===this.dbclickTrackFunc)this.$store.state.player.playPlaylistByID(this.id,t);else if("playAList"===this.dbclickTrackFunc){var i=this.tracks.map((function(t){return t.id}));this.$store.state.player.replacePlaylist(i,this.id,"artist",t)}else if("dailyTracks"===this.dbclickTrackFunc){var e=this.tracks.map((function(t){return t.id}));this.$store.state.player.replacePlaylist(e,"/daily/songs","url",t)}},playThisListDefault:function(t){if("playlist"===this.type)this.$store.state.player.playPlaylistByID(this.id,t);else if("album"===this.type)this.$store.state.player.playAlbumByID(this.id,t);else if("tracklist"===this.type){var i=this.tracks.map((function(t){return t.id}));this.$store.state.player.replacePlaylist(i,this.id,"artist",t)}},play:function(){this.$store.state.player.addTrackToPlayNext(this.rightClickedTrack.id,!0)},playNext:function(){this.$store.state.player.addTrackToPlayNext(this.rightClickedTrack.id)},like:function(){this.likeASong(this.rightClickedTrack.id)},likeASong:function(t){var i=this;if(Object(o["b"])()){var e=!0,a=this.liked.songs;a.includes(t)&&(e=!1),Object(c["d"])({id:t,like:e}).then((function(s){200===s.code&&(!1===e?(i.showToast(i.$t("toast.removedFromMyLikedSongs")),i.updateLikedSongs(a.filter((function(i){return i!==t})))):(i.showToast(i.$t("toast.savedToMyLikedSongs")),a.push(t),i.updateLikedSongs(a)))}))}else this.showToast("此操作需要登录网易云账号")},addTrackToPlaylist:function(){Object(o["b"])()?(this.updateModal({modalName:"addTrackToPlaylistModal",key:"show",value:!0}),this.updateModal({modalName:"addTrackToPlaylistModal",key:"selectedTrackID",value:this.rightClickedTrack.id})):this.showToast("此操作需要登录网易云账号")},removeTrackFromPlaylist:function(){var t=this;if(Object(o["b"])()){if(confirm("确定要从歌单删除 ".concat(this.rightClickedTrack.name,"？"))){var i=this.rightClickedTrack.id;Object(l["a"])({op:"del",pid:this.id,tracks:i}).then((function(e){t.showToast(200===e.body.code?"已从歌单中删除":e.body.message),t.$parent.removeTrack(i)}))}}else this.showToast("此操作需要登录网易云账号")}})},T=g,x=Object(f["a"])(T,a,s,!1,null,"0574ba73",null);i["a"]=x.exports},a23f:function(t,i,e){"use strict";e("0226")}}]);
//# sourceMappingURL=chunk-df053456.9d5951e0.js.map